/**
 * AngularJS service providing HTML5 local storage support
 * @version v0.1.0 - 2013-12-07
 * @link https://github.com/baumandm/angularLocalStorage
 * @author Dave Bauman <baumandm@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(){angular.module("angularLocalStorage",[]).factory("storage",["$parse","$window",function(a,b){var c,d,e,f;return e=null!=b.localStorage?b.localStorage:null,f=null!=e,c={getPairs:function(a){var b,c,f,g,h;for(c=[],f=function(b){var f,g;return f=e.key(b),g={key:f,value:d.get(f)},a(g)?c.push(g):void 0},b=g=0,h=e.length-1;h>=0?h>=g:g>=h;b=h>=0?++g:--g)f(b);return c},parseValue:function(a){var c,d,e,f;try{e=null!=(f=angular.fromJson(a))?f:a,e=function(){switch(e){case"true":return!0;case"false":return!1;case"null":return null;default:return e}}(),d=b.parseFloat(e),d!==e||angular.isObject(e)||(e=d)}catch(g){c=g,e=a}return e},removePairs:function(a){var b,e,f,g,h;for(e=c.getPairs(a),f=function(a){return d.remove(a.key)},g=0,h=e.length;h>g;g++)b=e[g],f(b);return e.length}},d={isSupported:function(){return f},size:function(){return e.length},set:function(a,b){var d;if(null==a)throw"Null keys are not permitted.";return d=angular.toJson(b),e.setItem(a,d),c.parseValue(d)},get:function(a,b){var d,f,g;return null==b&&(b=null),"function"==typeof a?(f=c.getPairs(a),0===f.length&&null!=b?b:f):(d=e.getItem(a),null!=(g=c.parseValue(d))?g:b)},initialize:function(a,b){var c;return c=d.get(a),null!=c?c:d.set(a,b)},increment:function(a,b,c){var f;if(null==b&&(b=1),null==c&&(c=1),f=d.get(a),null==f)return e.setItem(a,b);if("number"!=typeof f&&"[object Number]"!==toString.call(f))throw"Existing value is not a number.";return e.setItem(a,f+c)},decrement:function(a,b,c){return null==b&&(b=0),null==c&&(c=1),d.increment(a,b,-c)},remove:function(a){return"function"==typeof a?c.removePairs(a):(e.removeItem(a),!0)},bind:function(b,c,e){var f,g,h;return f={defaultValue:"",storeName:null},e=function(){switch(!1){case!angular.isString(e):return angular.extend({},f,{defaultValue:e});case!angular.isUndefined(e):return f;default:return angular.extend(f,e)}}(),g=null!=(h=e.storeName)?h:c,d.initialize(g,e.defaultValue),a(c).assign(b,d.get(g)),b.$watch(c,function(a){return angular.isDefined(a)?d.set(g,a):void 0},!0),d.get(g)},unbind:function(b,c,e){return e=null!=e?e:c,a(c).assign(b,null),b.$watch(c,function(){}),d.remove(e)},clearAll:function(){return e.clear()}}}])}).call(this);