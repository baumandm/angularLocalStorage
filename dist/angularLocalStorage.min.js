/**
 * AngularJS service providing HTML5 local storage support
 * @version v0.1.0 - 2013-11-29
 * @link https://github.com/baumandm/angularLocalStorage
 * @author Dave Bauman <baumandm@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function(){angular.module("angularLocalStorage",["ngCookies"]).factory("storage",["$parse","$cookieStore","$window","$log",function(a,b,c,d){var e,f,g,h;return g=null!=c.localStorage?c.localStorage:null,h=null!=g,e={parseValue:function(a){var b,d;try{d=angular.fromJson(a),null==d&&(d=a),"true"===d&&(d=!0),"false"===d&&(d=!1),"null"===d&&(d=null),c.parseFloat(d)!==d||angular.isObject(d)||(d=c.parseFloat(d))}catch(e){b=e,d=a}return d}},f={size:function(){return g.length},set:function(a,c){var f,i;if(null==a)return d.log("Null keys are not permitted");if(!h)try{return b.put(a,c),c}catch(j){return f=j,d.log("Local Storage not supported, make sure you have angular-cookies enabled.")}return i=angular.toJson(c),g.setItem(a,i),e.parseValue(i)},get:function(a,b){var c,d,f;if(null==b&&(b=null),!h)try{return e.parseValue($.cookie(a))}catch(i){return c=i,null}return d=g.getItem(a),null!=(f=e.parseValue(d))?f:b},getPairs:function(a){var b,c,d,e,h;for(c=[],d=function(b){var d,e;return d=g.key(b),e={key:d,value:f.get(d)},a(e)?c.push(e):void 0},b=e=0,h=g.length-1;h>=0?h>=e:e>=h;b=h>=0?++e:--e)d(b);return c},initialize:function(a,b){var c;return c=f.get(a),null!=c?c:f.set(a,b)},remove:function(a){var c;if(!h)try{return b.remove(a),!0}catch(d){return c=d,!1}return g.removeItem(a),!0},removePairs:function(a){var b,c,d,e,g;for(c=f.getPairs(a),d=function(a){return f.remove(a.key)},e=0,g=c.length;g>e;e++)b=c[e],d(b);return c.length},bind:function(b,c,d){var e,g;return e={defaultValue:"",storeName:""},d=angular.isString(d)?angular.extend({},e,{defaultValue:d}):angular.isUndefined(d)?e:angular.extend(e,d),g=d.storeName||c,f.initialize(g,d.defaultValue),a(c).assign(b,f.get(g)),b.$watch(c,function(a){return angular.isDefined(a)?f.set(g,a):void 0},!0),f.get(g)},unbind:function(b,c,d){return d=d||c,a(c).assign(b,null),b.$watch(c,function(){}),f.remove(d)},clearAll:function(){return g.clear()}}}])}).call(this);